<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Porcelain Dreams - Architecture Test</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="https://unpkg.com/@tonejs/midi@2.0.28/build/Midi.js"></script>
    <script src="./Tonex.js"></script>
    <script src="./ToneDAW.js"></script>
</head>
<body>
    <div id="daw"></div>
    <script>
        // Test de l'architecture correcte
        async function init() {
            console.log('ğŸ—ï¸ Test de l\'architecture modulaire...');
            
            // 1. Tonex loads and converts JSON
            console.log('ğŸ“ Tonex: Loading porcelain.json...');
            const response = await fetch('./porcelain.json');
            const jsonData = await response.json();
            console.log('âœ… Raw JSON loaded:', jsonData);
            
            // 2. Tonex converts to Tone.js format
            console.log('ğŸ”„ Tonex: Converting to Tone.js format...');
            const toneFormat = Tonex.convertToToneFormat(jsonData);
            console.log('âœ… Tone.js format generated:', toneFormat);
            
            // 3. ToneDAW reÃ§oit le format Tone.js et affiche l'interface
            console.log('ğŸ¹ ToneDAW: Creating interface...');
            const daw = new ToneDAW('daw', toneFormat);
            
            console.log('ğŸ¯ Modular architecture tested successfully!');
            console.log('   - Tonex: JSON â†’ Tone.js conversion âœ…');
            console.log('   - ToneDAW: User interface âœ…');
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
